# è™šæ‹Ÿæœºé…ç½®

## 1. centos7è™šæ‹Ÿæœº é…ç½®
 å®‰è£…å¥½ä¹‹åï¼Œä½œä¸ºä»¥åk8sèŠ‚ç‚¹ æ¨¡ç‰ˆå¤åˆ¶ä½¿ç”¨
### 1.1 å®‰è£…centos7

  
é…ç½®å¥½é˜¿é‡Œçš„yumæº
```bash
mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup
wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
yum makecache
yum update -y
```
è¿™ä¸ªè™šæ‹Ÿæœºç”¨æ¥å¤åˆ¶ä½¿ç”¨ï¼Œå¹¶ä¸”é…ç½®å¥½wireguard å†…ç½‘ç©¿é€ï¼Œæ–¹ä¾¿åœ¨å¤–è°ƒç”¨ã€‚

```bash
//é€šè¿‡å®¹å™¨åœ¨å…¬ç½‘vpså®‰è£…wg-easy
docker run -d \
  --name=wg-easy \
  -e WG_HOST=123.123.123.123 (ğŸš¨è¿™é‡Œè¾“å…¥æœåŠ¡å™¨çš„å…¬ç½‘IP) \
  -e PASSWORD=passwd123 (ğŸš¨è¿™é‡Œè¾“å…¥ä½ çš„å¯†ç ) \
  -e WG_DEFAULT_ADDRESS=10.10.10.x ï¼ˆğŸš¨é»˜è®¤IPåœ°å€ï¼‰\
  -e WG_DEFAULT_DNS=114.114.114.114 ï¼ˆğŸš¨é»˜è®¤DNSï¼‰\
  -e WG_ALLOWED_IPS=10.10.10.0/24 ï¼ˆğŸš¨å…è®¸è¿æ¥çš„IPæ®µï¼‰\
  -e WG_PERSISTENT_KEEPALIVE=25 ï¼ˆğŸš¨é‡è¿é—´éš”ï¼‰\
  -v ~/.wg-easy:/etc/wireguard \
  -p 51820:51820/udp \
  -p 51821:51821/tcp \
  --cap-add=NET_ADMIN \
  --cap-add=SYS_MODULE \
  --sysctl="net.ipv4.conf.all.src_valid_mark=1" \
  --sysctl="net.ipv4.ip_forward=1" \
  --restart unless-stopped \
  weejewel/wg-easy
```

åœ¨æœ¬åœ°è™šæ‹Ÿæœºé…ç½®å¥½ wireguard å¹¶è¿æ¥ä¸Š

```bash
//å®‰è£…
$ sudo yum install epel-release elrepo-release
$ sudo yum install yum-plugin-elrepo
$ sudo yum install kmod-wireguard wireguard-tools


//å°†é…ç½®æ–‡ä»¶æ”¾åœ¨/etc/wireguardä¸‹
systemctl enable wg-quick@wg0
wg-quick up wg0
wg-quick down wg0
```
### 1.2 å®‰è£…docker

```bash
sudo yum install -y yum-utils device-mapper-persistent-data lvm2
sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo
sudo sed -i 's+download.docker.com+mirrors.aliyun.com/docker-ce+' /etc/yum.repos.d/docker-ce.repo
sudo yum makecache fast
// å®‰è£…ï¼šå¼•æ“ cli å®¹å™¨è¿è¡Œæ—¶ å¤šå¹³å°æ„å»ºå·¥å…· å®¹å™¨ç¼–æ’å·¥å…·
yum install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

# å¯åŠ¨Docker
systemctl start docker
# åœæ­¢Docker
systemctl stop docker
# é‡å¯
systemctl restart docker
# è®¾ç½®å¼€æœºè‡ªå¯
systemctl enable docker
```


## 2. å®‰è£…dev è™šæ‹Ÿæœº
å¤åˆ¶centos7 æ¨¡ç‰ˆï¼Œé…ç½®å¥½wireguard å†…ç½‘ç©¿é€ï¼Œæ–¹ä¾¿åœ¨å¤–è°ƒç”¨ã€‚  
ä¸»è¦ç”¨æ¥è°ƒè¯•å¾®æœåŠ¡ä»£ç   
é…ç½®ï¼š12c  32gç£ç›˜ 32gå†…å­˜  
ä½¿ç”¨docker éƒ¨ç½²ç›¸å…³javaä¸­é—´ä»¶ä»¥åŠæµæ°´çº¿

## 3. å®‰è£…k8s èŠ‚ç‚¹
ä¸€ä¸ªmaster ä¸¤ä¸ªå·¥ä½œèŠ‚ç‚¹  
ä½¿ç”¨äº‘åŸç”Ÿç¯å¢ƒ  
é…ç½®ï¼š8c  32gç£ç›˜ 8gå†…å­˜

## 4. å®‰è£…openwrt

ä½œä¸ºæ•´ä¸ªpveçš„ç½‘å…³ï¼Œç”¨æ¥ç®¡ç†æ‰€æœ‰çš„è™šæ‹Ÿæœºæµé‡ï¼Œé…ç½®å°çŒ«å’ªã€‚