https://www.cnblogs.com/xdp-gacl/p/4261895.html





mybatis的关联表查询

## 一、一对一关联

###  1.1、提出需求

　　根据班级id查询班级信息(带老师的信息)

> 在数据库的班级表中有教师id字段，对应着一位老师，数据库表里存的是教师表的id字段，
>
> 那么在java实体班级类属性中，添加教师实体private Teacher teacher;
>
>  /**
> 14      * class表中有一个teacher_id字段，所以在Classes类中定义一个teacher属性，
> 15      * 用于维护teacher和class之间的一对一关系，通过这个teacher属性就可以知道这个班级是由哪个老师负责的
> 16      */
>
> 当然，也可以只在class实体类中维护一个教师id，但是拓展性差，如果你后续需要获取教师的其他信息（如姓名、职称等），你需要单独查询 `Teacher` 表，并手动将信息映射到 `Classes` 实体类。比如，执行完班级查询后，你可能还需要再次查询教师表，因此通常使用上面的方式

### 1.2、创建表和数据

　　创建一张教师表和班级表，这里我们假设一个老师只负责教一个班，那么老师和班级之间的关系就是一种一对一的关系。

```
 1 CREATE TABLE teacher(
 2     t_id INT PRIMARY KEY AUTO_INCREMENT, 
 3     t_name VARCHAR(20)
 4 );
 5 CREATE TABLE class(
 6     c_id INT PRIMARY KEY AUTO_INCREMENT, 
 7     c_name VARCHAR(20), 
 8     teacher_id INT
 9 );
10 ALTER TABLE class ADD CONSTRAINT fk_teacher_id FOREIGN KEY (teacher_id) REFERENCES teacher(t_id);    
11 
12 INSERT INTO teacher(t_name) VALUES('teacher1');
13 INSERT INTO teacher(t_name) VALUES('teacher2');
14 
15 INSERT INTO class(c_name, teacher_id) VALUES('class_a', 1);
16 INSERT INTO class(c_name, teacher_id) VALUES('class_b', 2);
```

[![复制代码](https://assets.cnblogs.com/images/copycode.gif)](javascript:void(0);)

　　表之间的关系如下：

　　![img](https://bobbo.oss-cn-beijing.aliyuncs.com/img_for_typora/011119505663513.png)

### 1.3、定义实体类

　　1、Teacher类，Teacher类是teacher表对应的实体类。

[![复制代码](https://assets.cnblogs.com/images/copycode.gif)](javascript:void(0);)

```
 1 package me.gacl.domain;
 2 
 3 /**
 4  * @author gacl
 5  * 定义teacher表对应的实体类
 6  */
 7 public class Teacher {
 8 
 9     //定义实体类的属性，与teacher表中的字段对应
10     private int id;            //id===>t_id
11     private String name;    //name===>t_name
12 
13     public int getId() {
14         return id;
15     }
16 
17     public void setId(int id) {
18         this.id = id;
19     }
20 
21     public String getName() {
22         return name;
23     }
24 
25     public void setName(String name) {
26         this.name = name;
27     }
28 
29     @Override
30     public String toString() {
31         return "Teacher [id=" + id + ", name=" + name + "]";
32     }
33 }
```

[![复制代码](https://assets.cnblogs.com/images/copycode.gif)](javascript:void(0);)

　　2、Classes类，Classes类是class表对应的实体类

```
 1 package me.gacl.domain;
 2 
 3 /**
 4  * @author gacl
 5  * 定义class表对应的实体类
 6  */
 7 public class Classes {
 8 
 9     //定义实体类的属性，与class表中的字段对应
10     private int id;            //id===>c_id
11     private String name;    //name===>c_name
12     
13     /**
14      * class表中有一个teacher_id字段，所以在Classes类中定义一个teacher属性，
15      * 用于维护teacher和class之间的一对一关系，通过这个teacher属性就可以知道这个班级是由哪个老师负责的
16      */
17     private Teacher teacher;
18 
19     public int getId() {
20         return id;
21     }
22 
23     public void setId(int id) {
24         this.id = id;
25     }
26 
27     public String getName() {
28         return name;
29     }
30 
31     public void setName(String name) {
32         this.name = name;
33     }
34 
35     public Teacher getTeacher() {
36         return teacher;
37     }
38 
39     public void setTeacher(Teacher teacher) {
40         this.teacher = teacher;
41     }
42 
43     @Override
44     public String toString() {
45         return "Classes [id=" + id + ", name=" + name + ", teacher=" + teacher+ "]";
46     }
47 }
```